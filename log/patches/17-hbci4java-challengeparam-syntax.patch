Index: src/challengedata.xml
===================================================================
RCS file: /cvsroot/hibiscus/hbci4java/src/challengedata.xml,v
retrieving revision 1.5
diff -u -r1.5 challengedata.xml
--- src/challengedata.xml	18 May 2011 17:19:08 -0000	1.5
+++ src/challengedata.xml	20 May 2011 10:51:01 -0000
@@ -50,19 +50,19 @@
     <challengeinfo spec="hhd12">
       <klass>20</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>20</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>10</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>otheriban</param>
       <param>Other.number</param>
@@ -96,19 +96,19 @@
     <challengeinfo spec="hhd12">
       <klass>22</klass>
       <param>sepa.dst.iban</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sepa.btg.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sepa.btg.value</param>
       <param condition-name="needchallengevalue" condition-value="J">sepa.btg.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>22</klass>
       <param>SegHead.code</param>
       <param>sepa.dst.iban</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sepa.btg.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sepa.btg.value</param>
       <param condition-name="needchallengevalue" condition-value="J">sepa.btg.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>09</klass>
-      <param type="value">sepa.btg.value</param>
+      <param type="Wrt">sepa.btg.value</param>
       <param>sepa.dst.iban</param>
     </challengeinfo>
   </job>
@@ -130,19 +130,19 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>34</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>Other.number</param>
     </challengeinfo>
@@ -152,21 +152,21 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>40</klass>
       <param></param>          <!-- Anzahl -->
       <param>orderid</param>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>My.number</param>
       <param></param>          <!-- IBAN Empfaenger -->
       <param>Other.number</param>
@@ -179,20 +179,20 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>43</klass>
       <param></param>          <!-- Anzahl -->
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param></param>          <!-- IBAN Empfaenger -->
       <param>Other.number</param>
@@ -203,14 +203,14 @@
     <challengeinfo spec="hhd12">
       <klass>50</klass>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>50</klass>
       <param>SegHead.code</param>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
@@ -223,19 +223,19 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>04</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>Other.number</param>
     </challengeinfo>
@@ -283,14 +283,14 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Belastungskto.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">Anlagebetrag.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">Anlagebetrag.value</param>
       <param condition-name="needchallengevalue" condition-value="J">Anlagebetrag.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Belastungskto.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">Anlagebetrag.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">Anlagebetrag.value</param>
       <param condition-name="needchallengevalue" condition-value="J">Anlagebetrag.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
@@ -303,19 +303,19 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>04</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>Other.number</param>
     </challengeinfo>
@@ -335,19 +335,19 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>15</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>Other.number</param>
     </challengeinfo>
@@ -357,14 +357,14 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
@@ -485,20 +485,20 @@
     <challengeinfo spec="hhd12">
       <klass>50</klass>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>50</klass>
       <param>SegHead.code</param>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>19</klass>
       <param>sumCount</param>
-      <param type="value">sumValue</param>
+      <param type="Wrt">sumValue</param>
       <param>KTV.number</param>
       <param>sumOthers</param>
     </challengeinfo>
@@ -518,14 +518,14 @@
     <challengeinfo spec="hhd12">
       <klass>50</klass>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>50</klass>
       <param>SegHead.code</param>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
@@ -548,20 +548,20 @@
     <challengeinfo spec="hhd12">
       <klass>50</klass>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>50</klass>
       <param>SegHead.code</param>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>12</klass>
       <param>sumCount</param>
-      <param type="value">sumValue</param>
+      <param type="Wrt">sumValue</param>
       <param>KTV.number</param>
       <param>sumOthers</param>
     </challengeinfo>
@@ -594,14 +594,14 @@
     <challengeinfo spec="hhd12">
       <klass>50</klass>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>50</klass>
       <param>SegHead.code</param>
       <param>sumOthers</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">sumValue</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">sumValue</param>
       <param condition-name="needchallengevalue" condition-value="J">sumCurr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
@@ -624,20 +624,20 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>43</klass>
       <param></param>          <!-- Anzahl -->
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param></param>          <!-- IBAN Empfaenger -->
       <param>Other.number</param>
@@ -661,22 +661,22 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>22</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>Other.number</param>
-      <param type="date">date</param>
+      <param type="Date">date</param>
     </challengeinfo>
   </job>
 
@@ -684,14 +684,14 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
@@ -711,19 +711,19 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>04</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.KIK.blz</param>
       <param>Other.number</param>
     </challengeinfo>
@@ -733,19 +733,19 @@
     <challengeinfo spec="hhd12">
       <klass>10</klass>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd13">
       <klass>10</klass>
       <param>SegHead.code</param>
       <param>Other.number</param>
-      <param condition-name="needchallengevalue" condition-value="J" type="value">BTG.value</param>
+      <param condition-name="needchallengevalue" condition-value="J" type="Wrt">BTG.value</param>
       <param condition-name="needchallengevalue" condition-value="J">BTG.curr</param>
     </challengeinfo>
     <challengeinfo spec="hhd14">
       <klass>05</klass>
-      <param type="value">BTG.value</param>
+      <param type="Wrt">BTG.value</param>
       <param>Other.number</param>
     </challengeinfo>
   </job>
Index: src/org/kapott/hbci/manager/ChallengeInfo.java
===================================================================
RCS file: /cvsroot/hibiscus/hbci4java/src/org/kapott/hbci/manager/ChallengeInfo.java,v
retrieving revision 1.5
diff -u -r1.5 ChallengeInfo.java
--- src/org/kapott/hbci/manager/ChallengeInfo.java	18 May 2011 17:19:08 -0000	1.5
+++ src/org/kapott/hbci/manager/ChallengeInfo.java	20 May 2011 10:51:01 -0000
@@ -21,9 +21,7 @@
 package org.kapott.hbci.manager;
 
 import java.io.InputStream;
-import java.text.SimpleDateFormat;
 import java.util.ArrayList;
-import java.util.Date;
 import java.util.HashMap;
 import java.util.List;
 import java.util.Map;
@@ -34,7 +32,8 @@
 
 import org.kapott.hbci.GV.HBCIJob;
 import org.kapott.hbci.GV.HBCIJobImpl;
-import org.kapott.hbci.datatypes.SyntaxWrt;
+import org.kapott.hbci.datatypes.SyntaxDE;
+import org.kapott.hbci.datatypes.factory.SyntaxDEFactory;
 import org.kapott.hbci.exceptions.HBCI_Exception;
 import org.kapott.hbci.exceptions.InvalidUserDataException;
 import org.w3c.dom.Document;
@@ -222,7 +221,6 @@
       // Seit HHD 1.4 duerfen Parameter mittendrin optional sein, sie
       // werden dann freigelassen
       String value = param.getValue(task);
-      
       if (value == null || value.length() == 0)
       {
         HBCIUtils.log("challenge parameter " + num + " (" + param.path + ") is empty",HBCIUtils.LOG_DEBUG2);
@@ -411,40 +409,39 @@
         return null;
       
       String value = job.getChallengeParam(this.path);
-      if (value == null || value.length() == 0)
-        return value;
+      
+      // Wert im passenden Format zurueckliefern
+      return format(value);
+    }
+    
+    /**
+     * Formatiert den Text abhaengig vom Typ.
+     * Wenn kein Typ angegeben ist, wird SyntaxAN verwendet.
+     * @param value der zu formatierende Wert.
+     * @return der formatierte Wert.
+     */
+    public String format(String value)
+    {
+      // Bei leeren Werten lieferen wir generell NULL.
+      // Die Parameter werden dann uebersprungen.
+      if (value == null || value.trim().length() == 0)
+        return null;
+
+      String t = this.type != null && type.length() > 0 ? this.type : "AN";
 
-      // haben wir einen konkreten Typ?
-      if (type != null && type.length() > 0)
+      SyntaxDEFactory factory = SyntaxDEFactory.getInstance();
+      SyntaxDE syntax = null;
+      try
       {
-        // Ist es ein Betrag?
-        if (type.equals("value"))
-        {
-          return new SyntaxWrt(value, 1, 0).toString(0);
-        }
-        // Datum?
-        else if (type.equals("date"))
-        {
-          try
-          {
-            // War ja klar, dass die das Datum hier nochmal in einem anderen Format haben wollen
-            Date date = new SimpleDateFormat("yyyy-MM-dd").parse(value);
-            return new SimpleDateFormat("ddMMyyyy").format(date);
-          }
-          catch (Exception e)
-          {
-            HBCIUtils.log("unable to parse " + value + " as yyyy-MM-dd, sending as is",HBCIUtils.LOG_WARN);
-            return value;
-          }
-        }
-        else
-        {
-          HBCIUtils.log("unknown parameter type " + type,HBCIUtils.LOG_WARN);
-        }
+        syntax = factory.createSyntaxDE(t,this.path,value,0,0);
+        return syntax.toString(0);
+      }
+      finally
+      {
+        // Objekt wieder freigeben
+        if (syntax != null)
+          factory.unuseObject(syntax,t);
       }
-      
-      // Ansonsten ganz normal den Betrag zurueckliefern
-      return value;
     }
   }
 }
